<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Ger√ßek AR √áiftlik</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    
    <style>
        /* Ba≈ülatma Butonu Tasarƒ±mƒ± */
        #ar-baslat-butonu {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 30px;
            background-color: #e91e63; /* Pembe renk */
            color: white;
            font-family: sans-serif;
            font-weight: bold;
            font-size: 18px;
            border-radius: 30px;
            border: none;
            z-index: 9999;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            display: block; /* Ba≈ülangƒ±√ßta g√∂r√ºn√ºr */
        }
    </style>

    <script>
        // TIKLAMA VE YERLE≈ûTƒ∞RME MANTIƒûI
        AFRAME.registerComponent('ar-kontrol', {
            init: function () {
                this.reticle = document.querySelector("#hedef-halkasi");
                this.farm = document.querySelector("#ciftlik-modeli");
                this.placed = false;

                // Ekrana dokunulunca √ßalƒ±≈üƒ±r
                this.el.sceneEl.addEventListener('click', (event) => {
                    // Eƒüer hen√ºz yerle≈ütirilmediyse ve halka g√∂r√ºn√ºrse
                    if (!this.placed && this.reticle.object3D.visible) {
                        // 1. √áiftliƒüi halkanƒ±n olduƒüu yere koy
                        this.farm.setAttribute('position', this.reticle.getAttribute('position'));
                        this.farm.setAttribute('rotation', this.reticle.getAttribute('rotation'));
                        
                        // 2. √áiftliƒüi g√∂r√ºn√ºr yap
                        this.farm.setAttribute('visible', 'true');
                        
                        // 3. Halkayƒ± yok et
                        this.reticle.setAttribute('visible', 'false');
                        this.placed = true;
                    }
                });
            }
        });

        // AR BA≈ûLATMA BUTONU FONKSƒ∞YONU
        function arBaslat() {
            var scene = document.querySelector('a-scene');
            var button = document.querySelector('#ar-baslat-butonu');
            
            // WebXR AR oturumunu ba≈ülat
            scene.enterVR(); 
            button.style.display = 'none'; // Butonu gizle
        }
    </script>
</head>
<body style="margin: 0; overflow: hidden;">

    <button id="ar-baslat-butonu" onclick="arBaslat()">KAMERAYI A√á üì∑</button>

    <a-scene 
        webxr="optionalFeatures: hit-test, dom-overlay; overlayElement: #ar-baslat-butonu"
        vr-mode-ui="enabled: false"
        ar-mode-ui="enabled: true"
        renderer="alpha: true; antialias: true; colorManagement: true;"
        ar-kontrol
        background="color: transparent"> <a-light type="directional" position="0 5 0" intensity="1"></a-light>
        <a-light type="ambient" intensity="0.5"></a-light>

        <a-entity id="hedef-halkasi" ar-hit-test-target visible="false">
            <a-ring color="white" rotation="-90 0 0" radius-inner="0.1" radius-outer="0.15"></a-ring>
        </a-entity>

        <a-entity id="ciftlik-modeli" visible="false" position="0 0 -1">
            
            <a-plane rotation="-90 0 0" width="2" height="2" color="#4CAF50" shadow></a-plane>

            <a-box position="-0.5 0.25 0" scale="0.5 0.5 0.5" color="red" shadow></a-box>
            
            <a-cylinder position="0.5 0.3 0" radius="0.05" height="0.6" color="#5D4037"></a-cylinder>
            <a-dodecahedron position="0.5 0.8 0" radius="0.25" color="green"></a-dodecahedron>

        </a-entity>

        <a-entity ar-hit-test="target:#hedef-halkasi; type:map"></a-entity>

    </a-scene>
</body>
</html>
